<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>FBA Hub – Fantasy Brick Association</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #05060a;
      --card: #151822;
      --accent: #ff8a2a;
      --text: #f5f5f7;
      --muted: #a0a3b1;
      --border: #262938;
      --shadow-soft: 0 18px 55px rgba(0, 0, 0, 0.55);
      --radius-lg: 18px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
    }

    .page { width: 100%; max-width: 1200px; }

    /* HERO: Orange abgedämpft */
    header {
      position: relative;
      border-radius: 24px;
      padding: 20px 24px;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 24px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 24px;
      overflow: hidden;

      background:
        linear-gradient(135deg,
          rgba(255, 138, 42, 0.55) 0%,
          rgba(249, 115, 22, 0.42) 38%,
          rgba(234, 88, 12, 0.28) 100%),
        radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.06), transparent 60%),
        linear-gradient(180deg, rgba(2, 6, 23, 0.92), rgba(2, 6, 23, 0.92));
      border: 1px solid rgba(255, 138, 42, 0.18);
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-width: 520px;
    }

    .brand-title {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .brand-subtitle { font-size: 16px; opacity: 0.92; }

    .brand-meta {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      font-size: 14px;
      opacity: 0.92;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(2, 6, 23, 0.32);
      font-size: 13px;
      backdrop-filter: blur(8px);
    }

    .podcast-card {
      background: rgba(2, 6, 23, 0.38);
      border-radius: 18px;
      padding: 10px 12px;
      width: 340px;
      min-width: 260px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      backdrop-filter: blur(10px);
    }

    .podcast-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .podcast-title { font-size: 15px; font-weight: 700; }

    .podcast-badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      border-radius: 999px;
      padding: 3px 8px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background: rgba(2, 6, 23, 0.65);
    }

    .podcast-iframe-wrapper {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    iframe { border: none; width: 100%; }

    main {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: 2fr 1.5fr;
      gap: 20px;
    }

    .card {
      background:
        radial-gradient(circle at top left, rgba(255, 138, 42, 0.10), transparent 55%),
        radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.92), #020617);
      border-radius: var(--radius-lg);
      padding: 16px 18px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
      gap: 12px;
    }

    .card-title {
      font-size: 19px;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    .card-subtitle {
      font-size: 13px;
      color: var(--muted);
      margin-top: 2px;
    }

    .badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 138, 42, 0.35);
      background: rgba(255, 138, 42, 0.12);
      color: var(--accent);
      white-space: nowrap;
    }

    .section-body { font-size: 15px; }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th, td {
      padding: 7px 6px;
      text-align: left;
      border-bottom: 1px solid #1f2937;
      vertical-align: middle;
    }

    th {
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    tr:last-child td { border-bottom: none; }

    .team-cell {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .team-logo {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      object-fit: cover;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: #020617;
      flex-shrink: 0;
    }

    .team-name { font-size: 14px; font-weight: 600; }

    .muted { color: var(--muted); font-size: 13px; }

    .pill-small {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .delta-pos { color: #bbf7d0; }
    .delta-neg { color: #fecaca; }
    .delta-zero { color: var(--muted); }

    .highlight-row { background: rgba(2, 6, 23, 0.55); }

    /* Switch Tabs (PR / PR+) */
    .switch {
      display: inline-flex;
      gap: 8px;
      align-items: center;
    }

    .switch button {
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(2, 6, 23, 0.40);
      color: var(--text);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      transition: 120ms ease;
      white-space: nowrap;
    }

    .switch button.active {
      border-color: rgba(255, 138, 42, 0.55);
      background: rgba(255, 138, 42, 0.14);
      color: var(--accent);
    }

    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    @media (max-width: 900px) {
      header { flex-direction: column; }
      .podcast-card { width: 100%; }
      .grid { grid-template-columns: 1fr; }
    }

    @media (max-width: 600px) {
      body { padding: 12px; }
      header { padding: 16px; }
      .brand-title { font-size: 22px; }
      .card { padding: 14px; }
      table { font-size: 13px; }
      th, td { padding: 6px 4px; }
    }
  </style>
</head>

<body>
  <div class="page">
    <header>
      <div class="brand">
        <div class="brand-title">Fantasy Brick Association</div>
        <div class="brand-subtitle">
          FBA Hub – alle Zahlen, Serien und Power Rankings der Liga auf einen Blick.
        </div>
        <div class="brand-meta">
          <span class="pill">Regular Season 25/26</span>
          <span class="pill" id="best-team-pill">Beste Bilanz: –</span>
          <span class="pill" id="streak-pill">Längste Serie: –</span>
        </div>
      </div>

      <div class="podcast-card">
        <div class="podcast-header">
          <div>
            <div class="podcast-title">FBA Podcast – aktuelle Folge</div>
            <div class="muted">Direkt im Hub abspielbar.</div>
          </div>
          <div class="podcast-badge">Podcast</div>
        </div>
        <div class="podcast-iframe-wrapper">
          <iframe id="podcast-embed"
                  src=""
                  height="152"
                  allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                  loading="lazy"></iframe>
        </div>
      </div>
    </header>

    <main>
      <div class="grid">
        <!-- Live Matchups -->
        <section class="card" id="live-dashboard">
          <div class="card-header">
            <div>
              <div class="card-title">Live Matchups</div>
              <div class="card-subtitle">Auswärts | Score | Heim | Prognose</div>
            </div>
            <span class="badge">Live</span>
          </div>

          <div class="section-body">
            <table id="matchups-table">
              <thead>
                <tr>
                  <th>Auswärts</th>
                  <th>Score</th>
                  <th>Heim</th>
                  <th>Prognose</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" class="muted">Daten werden geladen …</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Power Ranking Switch -->
        <section class="card" id="power-card">
          <div class="card-header">
            <div>
              <div class="card-title">Power Ranking</div>
              <div class="card-subtitle">Switch zwischen PR und PR+ (Woche W-1)</div>
            </div>

            <div class="switch" role="tablist" aria-label="Power Ranking Switch">
              <button id="btn-pr" class="active" type="button">PR</button>
              <button id="btn-prplus" type="button">PR+</button>
            </div>
          </div>

          <div class="section-body">
            <div id="panel-pr" class="tab-panel active">
              <table id="power-ranking-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Team</th>
                    <th>Score</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="3" class="muted">Daten werden geladen …</td></tr>
                </tbody>
              </table>
            </div>

            <div id="panel-prplus" class="tab-panel">
              <table id="power-ranking-plus-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Team</th>
                    <th>Score+</th>
                    <th>Δ</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="4" class="muted">Daten werden geladen …</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>

      <div class="grid">
        <!-- Standings -->
        <section class="card" id="standings-card">
          <div class="card-header">
            <div>
              <div class="card-title">Aktuelle Tabelle</div>
              <div class="card-subtitle">Live-Standings inklusive Serien.</div>
            </div>
            <span class="badge">Standings</span>
          </div>

          <div class="section-body">
            <table id="standings-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Team</th>
                  <th>Bilanz</th>
                  <th>W%</th>
                  <th>Serie</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="5" class="muted">Daten werden geladen …</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Platzhalter für später -->
        <section class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Coming Next</div>
              <div class="card-subtitle">Hall of Fame, Ewige Tabelle, Rekorde – als nächster Block.</div>
            </div>
            <span class="badge">Roadmap</span>
          </div>
          <div class="section-body muted">
            Sobald PR & PR+ sauber live laufen, hängen wir die nächsten Export-Tabs dran.
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    // === CSV-Quellen ===
    const SETTINGS_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vShK9dZvsVWaW-dOTecnC2XAxyBNB7uoL9u8I2n5py4cv1z5iuB8ivY-LBYyRGrkutNM0dS40VpV0n0/pub?gid=0&single=true&output=csv";

    const STANDINGS_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vShK9dZvsVWaW-dOTecnC2XAxyBNB7uoL9u8I2n5py4cv1z5iuB8ivY-LBYyRGrkutNM0dS40VpV0n0/pub?gid=683402103&single=true&output=csv";

    const MATCHUPS_LIVE_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vShK9dZvsVWaW-dOTecnC2XAxyBNB7uoL9u8I2n5py4cv1z5iuB8ivY-LBYyRGrkutNM0dS40VpV0n0/pub?gid=478155593&single=true&output=csv";

    // Du hast pubhtml-Links geschickt -> Code normalisiert automatisch auf CSV.
    // Hinweis: Beide Links sind aktuell identisch (gleicher gid). PR und PR+ werden dadurch gleich aussehen,
    // bis du den echten PR+-gid einsetzt.
    const POWER_RANKING_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vShK9dZvsVWaW-dOTecnC2XAxyBNB7uoL9u8I2n5py4cv1z5iuB8ivY-LBYyRGrkutNM0dS40VpV0n0/pubhtml?gid=1192817047&single=true";

    const POWER_RANKING_PLUS_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vShK9dZvsVWaW-dOTecnC2XAxyBNB7uoL9u8I2n5py4cv1z5iuB8ivY-LBYyRGrkutNM0dS40VpV0n0/pubhtml?gid=1192817047&single=true";

    // === Team-Logos ===
    const teamLogos = {
      "BlackForest Mad Wolves": "logos/Logo BlackForest Mad Wolves.png",
      "Balingen Lions": "logos/Logo Balingen Lions.png",
      "East Bay Pirates": "logos/Logo East Bay Pirates.png",
      "Toronto Polar Bears": "logos/Logo Toronto Polar Bears.png",
      "Wild Cheetahs": "logos/Logo Wild Cheetahs.png",
      "Karlsruhe Unicorns": "logos/Logo Karlsruhe Unicorns.png",
      "Dormettingen Eagles": "logos/Logo Dormettingen Eagles.png",
      "Guardians of Rhinos": "logos/Logo Guardians of Rhinos.png"
    };

    function encodePath(p) {
      return encodeURI(p);
    }

    function getLogoSrc(teamName) {
      const p = teamLogos[teamName] || "logos/placeholder.png";
      return encodePath(p);
    }

    function logoImgHtml(teamName) {
      const src = getLogoSrc(teamName);
      return `<img class="team-logo" src="${src}" alt="" onerror="this.onerror=null;this.src='${encodePath("logos/placeholder.png")}'">`;
    }

    // === Normalize Google pubhtml/pub to CSV ===
    function normalizeGoogleSheetToCSV(url) {
      if (!url) return url;

      // pubhtml -> pub?output=csv
      if (url.includes("docs.google.com/spreadsheets/") && url.includes("/pubhtml")) {
        const u = new URL(url);
        const gid = u.searchParams.get("gid") || "";
        return `${u.origin}${u.pathname.replace("/pubhtml", "/pub")}?gid=${gid}&single=true&output=csv`;
      }

      // pub -> ensure output=csv
      if (url.includes("docs.google.com/spreadsheets/") && url.includes("/pub")) {
        const u = new URL(url);
        if (!u.searchParams.get("output")) u.searchParams.set("output", "csv");
        if (!u.searchParams.get("single")) u.searchParams.set("single", "true");
        return u.toString();
      }

      return url;
    }

    // === CSV-Helper ===
    async function fetchCSV(url) {
      if (!url) return null;

      const finalUrl = normalizeGoogleSheetToCSV(url);
      const res = await fetch(finalUrl, { cache: "no-store" });
      const text = await res.text();

      const rows = text
        .trim()
        .split(/\r?\n/)
        .map((line) => {
          const result = [];
          let current = "";
          let inQuotes = false;
          for (let i = 0; i < line.length; i++) {
            const ch = line[i];
            if (ch === '"' && line[i + 1] === '"') { current += '"'; i++; }
            else if (ch === '"') { inQuotes = !inQuotes; }
            else if (ch === "," && !inQuotes) { result.push(current); current = ""; }
            else { current += ch; }
          }
          result.push(current);
          return result;
        });

      const headers = rows[0];
      const data = rows.slice(1).map((row) => {
        const obj = {};
        headers.forEach((h, i) => {
          obj[h.trim()] = row[i] !== undefined ? row[i].trim() : "";
        });
        return obj;
      });
      return data;
    }

    // === Switch (PR / PR+) ===
    function setupSwitch() {
      const btnPR = document.getElementById("btn-pr");
      const btnPRP = document.getElementById("btn-prplus");
      const panelPR = document.getElementById("panel-pr");
      const panelPRP = document.getElementById("panel-prplus");

      if (!btnPR || !btnPRP || !panelPR || !panelPRP) return;

      function activate(which) {
        const pr = which === "pr";
        btnPR.classList.toggle("active", pr);
        btnPRP.classList.toggle("active", !pr);
        panelPR.classList.toggle("active", pr);
        panelPRP.classList.toggle("active", !pr);
      }

      btnPR.addEventListener("click", () => activate("pr"));
      btnPRP.addEventListener("click", () => activate("prplus"));
    }

    // === Settings laden ===
    async function loadSettings() {
      const data = await fetchCSV(SETTINGS_CSV_URL);
      if (!data || !data.length) return;
      const row = data[0];

      const bestTeam = row.best_team || "–";
      const bestWinPct = row.best_win_pct || "";
      const winStreakTeam = row.win_streak_team || "";
      const winStreakLabel = row.win_streak_label || "";
      const lossStreakTeam = row.loss_streak_team || "";
      const lossStreakLabel = row.loss_streak_label || "";
      const podcastEmbedSrc = row.podcast_embed_src || "";

      const bestTeamPill = document.getElementById("best-team-pill");
      if (bestTeamPill) {
        bestTeamPill.textContent =
          bestWinPct
            ? `Beste Bilanz: ${bestTeam} (${(parseFloat(bestWinPct) * 100).toFixed(1)} %)`
            : `Beste Bilanz: ${bestTeam}`;
      }

      const streakPill = document.getElementById("streak-pill");
      if (streakPill) {
        let txt = "Längste Serie: –";
        if (winStreakTeam && winStreakLabel) {
          txt = `Längste Serie: ${winStreakTeam} (${winStreakLabel})`;
        }
        if (lossStreakTeam && lossStreakLabel) {
          txt += ` · Negativ: ${lossStreakTeam} (${lossStreakLabel})`;
        }
        streakPill.textContent = txt;
      }

      const iframe = document.getElementById("podcast-embed");
      if (iframe && podcastEmbedSrc) iframe.src = podcastEmbedSrc;
    }

    // === Standings laden ===
    async function loadStandings() {
      const tbody = document.querySelector("#standings-table tbody");
      if (!tbody) return;

      const data = await fetchCSV(STANDINGS_CSV_URL);
      if (!data) {
        tbody.innerHTML = '<tr><td colspan="5" class="muted">Keine Standings verfügbar.</td></tr>';
        return;
      }

      tbody.innerHTML = "";
      data.forEach((row) => {
        if (!row.team_name) return;

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.rank || ""}</td>
          <td>
            <div class="team-cell">
              ${logoImgHtml(row.team_name)}
              <span class="team-name">${row.team_name}</span>
            </div>
          </td>
          <td>${(row.wins || "0")}-${(row.losses || "0")}</td>
          <td>${row.win_pct ? ((parseFloat(row.win_pct) * 100).toFixed(1) + " %") : "–"}</td>
          <td>${row.streak_label || "–"}</td>
        `;
        tbody.appendChild(tr);
      });

      if (!tbody.children.length) {
        tbody.innerHTML = '<tr><td colspan="5" class="muted">Keine Standings verfügbar.</td></tr>';
      }
    }

    // === Matchups live laden (Auswärts | Score | Heim | Prognose) ===
    async function loadMatchups() {
      const tbody = document.querySelector("#matchups-table tbody");
      if (!tbody) return;

      const data = await fetchCSV(MATCHUPS_LIVE_CSV_URL);
      if (!data) {
        tbody.innerHTML = '<tr><td colspan="4" class="muted">Keine Matchups verfügbar.</td></tr>';
        return;
      }

      tbody.innerHTML = "";
      data.forEach((row) => {
        if (!row.away_team || !row.home_team) return;

        const awayScore = row.away_score || row.away_cats || "";
        const homeScore = row.home_score || row.home_cats || "";
        const score =
          (awayScore && homeScore) ? `${awayScore}–${homeScore}` :
          (row.score || row.live_score || "–");

        const prog = row.projection_label || row.prognose || row.projection || "–";

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>
            <div class="team-cell">
              ${logoImgHtml(row.away_team)}
              <span class="team-name">${row.away_team}</span>
            </div>
          </td>
          <td><span class="pill-small">${score}</span></td>
          <td>
            <div class="team-cell">
              ${logoImgHtml(row.home_team)}
              <span class="team-name">${row.home_team}</span>
            </div>
          </td>
          <td>${prog !== "–" ? `<span class="pill-small">${prog}</span>` : `<span class="muted">–</span>`}</td>
        `;
        tbody.appendChild(tr);
      });

      if (!tbody.children.length) {
        tbody.innerHTML = '<tr><td colspan="4" class="muted">Keine Matchups verfügbar.</td></tr>';
      }
    }

    // === Power Ranking (klassisch) laden ===
    async function loadPowerRanking() {
      const tbody = document.querySelector("#power-ranking-table tbody");
      if (!tbody) return;

      const data = await fetchCSV(POWER_RANKING_CSV_URL);
      if (!data) {
        tbody.innerHTML = '<tr><td colspan="3" class="muted">Noch kein Power Ranking veröffentlicht.</td></tr>';
        return;
      }

      tbody.innerHTML = "";
      data
        .filter((row) => row.team_name)
        .sort((a, b) => (parseInt(a.rank || 99) - parseInt(b.rank || 99)))
        .forEach((row) => {
          const tr = document.createElement("tr");
          if (row.rank === "1") tr.classList.add("highlight-row");

          const scoreNum = row.score ? parseFloat(row.score.replace(",", ".")) : NaN;
          const scoreTxt = (!isNaN(scoreNum)) ? scoreNum.toFixed(3) : (row.score || "–");

          tr.innerHTML = `
            <td>${row.rank || ""}</td>
            <td>
              <div class="team-cell">
                ${logoImgHtml(row.team_name)}
                <span class="team-name">${row.team_name}</span>
              </div>
              ${row.note ? `<div class="muted">${row.note}</div>` : ""}
            </td>
            <td>${scoreTxt}</td>
          `;
          tbody.appendChild(tr);
        });

      if (!tbody.children.length) {
        tbody.innerHTML = '<tr><td colspan="3" class="muted">Noch kein Power Ranking veröffentlicht.</td></tr>';
      }
    }

    // === Power Ranking+ laden ===
    async function loadPowerRankingPlus() {
      const tbody = document.querySelector("#power-ranking-plus-table tbody");
      if (!tbody) return;

      const data = await fetchCSV(POWER_RANKING_PLUS_CSV_URL);
      if (!data) {
        tbody.innerHTML = '<tr><td colspan="4" class="muted">Noch kein Power Ranking+ veröffentlicht.</td></tr>';
        return;
      }

      tbody.innerHTML = "";
      data
        .filter((row) => row.team_name)
        .sort((a, b) => (parseInt(a.rank || 99) - parseInt(b.rank || 99)))
        .forEach((row) => {
          const tr = document.createElement("tr");
          if (row.rank === "1") tr.classList.add("highlight-row");

          const scoreNum = row.score ? parseFloat(row.score.replace(",", ".")) : NaN;
          const scoreTxt = (!isNaN(scoreNum)) ? scoreNum.toFixed(3) : (row.score || "–");

          const deltaRaw = row.delta || "0";
          const d = parseInt(deltaRaw, 10);
          let cls = "delta-zero";
          let txt = "0";
          if (!isNaN(d)) {
            if (d > 0) { cls = "delta-pos"; txt = "+" + d; }
            else if (d < 0) { cls = "delta-neg"; txt = d.toString(); }
          } else {
            txt = deltaRaw;
          }

          tr.innerHTML = `
            <td>${row.rank || ""}</td>
            <td>
              <div class="team-cell">
                ${logoImgHtml(row.team_name)}
                <span class="team-name">${row.team_name}</span>
              </div>
            </td>
            <td>${scoreTxt}</td>
            <td><span class="${cls}">${txt}</span></td>
          `;
          tbody.appendChild(tr);
        });

      if (!tbody.children.length) {
        tbody.innerHTML = '<tr><td colspan="4" class="muted">Noch kein Power Ranking+ veröffentlicht.</td></tr>';
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      setupSwitch();
      loadSettings();
      loadStandings();
      loadMatchups();
      loadPowerRanking();
      loadPowerRankingPlus();
    });
  </script>
</body>
</html>
